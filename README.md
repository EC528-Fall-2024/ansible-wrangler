# Ansible Wrangler

## Members:
| Name | Role | Contact Information |
| :---: | :---: | :---: |
| Ryan Cook | Mentor  | rcook@redhat.com |
| Albert Zhao | Contributor | albertz@bu.edu |
| Reza Sajjadi | Contributor | sajjadi@bu.edu |
| Jack Edelist | Contributor | edelist@bu.edu |
| Arthur Hua | Contributor | ahua102@bu.edu |
| Michael Barany | Contributor | mbarany@bu.edu |

## Project Background and Description
The Ansible Wrangler Automation project is a fully automated solution that integrates ServiceNow incident management with Ansible playbook generation and Github repository management. This project aims to simplify and streamline the process of generating, managing, and deploying Ansible playbooks in response to incidents reported by ServiceNow users. This system automates the process of identifying incidents, creating appropriate Ansible playbooks via the OpenAI API, checking for pre-existing playbooks, and pushing changes to a GitHub repository through pull requests. Overall this project should reduce the time between reporting an error and getting feedback from another software developer by having a solution be generated immediately. This should allow more people to be able to use ansible without having in-depth knowledge about how to fine-tune their system.

## Visions and Overall Goals
Our vision is to reduce manual efforts involved in incident management and playbook creation, and create a fully automated pipeline that helps companies and software developers streamline their problem-solving process. 

The preliminary goal is to create a system where users can pass code alongside an error message to a chat-based interface, such as Slack or other bot-accessible systems which is most utilized by the company using the platform (in this case RedHat). The bot with then use this information to generate a prompt that leverages OpenAI’s GPT to search through a git repository populated with potentially relevant playbooks that address issues. It will then determine if a suitable playbook exists and return it to the user. 

If no suitable playbook exists, the AI will dynamically generate one based on its understanding of the error, the provided code, and historical data similar to this issue. The ideal playbook will offer a step by step guide in resolving the issue which can be stored for future use. 

This automation reduces the need for manual troubleshooting and playbook creating, helping teams efficiently address issues and continuously enhance their internal databases.

## Users and Personas of the Project
### Site Reliability Engineer (SRE): 
- Key Characteristics:
  -  Responsible for ensuring high availability, performance, and security of infrastructure
  - Frequently responds to incidents and investigates operational issues
  - Familiar with Ansible and monitoring platforms (e.g. Prometheus, Grafana)
  - Needs rapid and reliable solutions for infrastructure problems
  - Comfortable working with playbook and scripts
- Primary Actions:
  - Receives alerts about system issues from monitoring systems or incident platforms
  - Reviews and approves proposed Ansible playbooks generated by Ansible Wrangler
  - Initiates playbook execution to resolve detected issues
  - Provides feedback on playbook performance to improve future remediations
### System Administrator (SysAdmin): 
- Key Characteristics:
  - Manages and maintains the core Linux/Kubernetes infrastructure
  - First point of contact for infrastructure-related issues
  - Maintains repositories of standard playbooks and updates these based on system changes
  - Looks for ways to streamline repetitive tasks through automation
- Primary Actions:
  - Reviews and updates playbooks generated by Ansible Wrangler before merging them into production
  - Suggests improvements to existing playbooks for more efficient operation
  - Ensures new system updates or configurations are integrated into playbooks
### Security Engineer
- Key Characteristics:
  - Responsible for ensuring the security and compliance of the OS and infrastructure
  - Identifies and remediates security incidents, vulnerabilities, and misconfigurations
  - Reviews security impact of proposed playbooks
- Primary Actions:
  - Audits generated playbooks to ensure they adhere to security policies
  - Validates that proposed remediations don’t introduce new vulnerabilities or compliance issues
  - Provides feedback on security aspects of automation processes
### DevOps Engineer
- Key Characteristics:
  - Bridges gap between development and operations, and maintains CI/CD pipelines
  - Integrates playbooks into deployment workflows and continuous automation pipelines
- Primary Actions:
  - Manages and merges playbooks into Git repositories.
  - Automates playbook execution as part of CI/CD pipelines.
  - Ensures that proposed playbooks are tested and reliable before deployment. 

## Scope and Features of the Project
### ServiceNow Integration: 
Automatically queries ServiceNow to fetch incidents based on a specific user and updates the state of incidents after processing
### AI-Generated Playbooks: 
Uses OpenAI’s GPT model to generate Ansible playbooks based on incident descriptions when no suitable existing playbook is found 
### GitHub Automation: 
Automatically pushes generated playbooks to a Github repository, creates new branches, and submits pull requests for review
### Existing Playbook Search: 
Searches a repository of existing playbooks for a match to avoid duplicate playbook generation.

## Additional Features to be Considered
These are some of the features that we could implement after the completion of our main objectives. 
### Incident Feedback Loop: 
implement feedback mechanism for SREs to rate effectiveness of generated playbooks
### Incident categorization: 
use generative AI to categorize incidents into different severity levels and assign relevant actions or workflows automatically
### ChatOps Integration: 
integrate with Slack, Microsoft Teams or other chat platforms to allow playbook generation within team chats, or direct access through 1-on-1 chat with an Ansible Wranger “bot”
### Further Cloud and Queue Integration:
Using different queue structures to prioritize different tasks and requests when handling a large load of incident requests. 

## Solution Concept

## General Architectural Overall of the Project:
This project follows a modular architecture that integrates several components to automate incident handling and playbook generation. Below is a general architectural overview and workflow of the project: 
Architectural components:
1. ServiceNow: This is the starting point of the workflow, where incidents are generated and managed. We will utilize ServiceNow API to fetch incidents.
2. Ansible Wrangler Automation: The core of this automation engine that:
   - Incident Retrieval: get incidents created by users from ServiceNow.
   - Playbook Search Module: searches for existing playbooks in a GitHub repo to check for a match with the incident description
   - OpenAI API Interaction: if no match is found, this module generates a new Ansible playbook using the OpenAI GPT model based on the description of the incident.
   - GitHub API Integration: Automatically submits a pull request to a specific GitHub repo for the newly generated playbook
   - Incident State Updater: Updates the state of the incident in ServiceNow to notify the user about the action taken. 
3. GitHub Repository: A version control system where the existing playbooks are stored, and new playbooks are committed. We will be using the GitHub API to manage the repository, branches, commits, and pull requests. 
4. OpenAI API: The natural language processing model (GPT) that interprets incident descriptions and generates Ansible playbooks.

### General Flow of Data and Interaction:
<img width="811" alt="image" src="https://github.com/user-attachments/assets/eaec2984-7cc5-47b4-95fd-66038453f5c6">


## Design Implications and Discussion

## Acceptance Criteria
We want to make sure that the core functionality of the Ansible Wrangler Automation project is met. To ensure this, essential features and capabilities must be implemented and verified for this project to be complete. Essential features include:
- ServiceNow Incident Retrieval
- Existing Playbook search
- OpenAI (or other language model) playbook generation
- GitHub Integration
- ServiceNow incident update

## Release Planning 

## General Comments




